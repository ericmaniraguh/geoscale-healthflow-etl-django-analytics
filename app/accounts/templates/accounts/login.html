{% extends "accounts/base_auth.html" %}
{% load static %}
{% block title %}Login{% endblock %}

{% block content %}
<style>
  /* Compact Login Styles */
  .form-container {
    padding-top: 40px !important;
    max-width: 450px !important; /* Standard width for login */
    width: 100%;
  }
  
  .form-container h2 {
    font-size: 1.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  
  .form-container p {
    margin-bottom: 1rem !important;
    font-size: 0.9rem !important;
  }

  /* Compact Inputs */
  .form-field {
    margin-bottom: 0.8rem !important;
  }
  
  .form-field label {
    font-size: 0.85rem !important;
    margin-bottom: 0.2rem !important;
  }

  input[type="text"],
  input[type="password"],
  input[type="email"] {
    padding: 10px 12px !important;
    font-size: 0.9rem !important;
    height: auto !important;
  }

  /* Force scrollbar hiding */
  .auth-right {
    overflow-y: hidden !important; 
    scrollbar-width: none !important;
    -ms-overflow-style: none !important;
    padding: 1rem !important;
  }
  
  .auth-right::-webkit-scrollbar {
    display: none !important;
  }

  /* Logo in top-right corner */
  .auth-logo {
    position: absolute !important;
    top: 40px !important;
    right: 40px !important;
    z-index: 10;
    margin: 0 !important;
    text-align: right !important;
    width: auto !important;
  }

  .auth-logo img {
    height: 50px !important;
    width: auto !important;
  }
</style>

<!-- Responsive Layout using auth.css classes -->
<div class="auth-wrapper">
  
  <!-- LEFT PANEL: Illustration -->
  <div class="auth-left">
    <div class="auth-overlay" style="background: linear-gradient(135deg, rgba(236, 253, 245, 0.9) 0%, rgba(209, 250, 229, 0.9) 100%);"></div>
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 3; text-align: center; width: 100%; padding: 20px;">
           </div>
  </div>
  
  <!-- RIGHT PANEL: Login Form -->
  <div class="auth-right">
    
    <div class="auth-logo">
      <img src="{% static 'accounts/Images/upanzi-network-logo.png' %}" alt="Upanzi Network">
    </div>

    <!-- Form Container -->
    <div class="form-container">

      <!-- Heading -->
      <h2 style="text-align: center;">Welcome back</h2>
      <p style="text-align: center; margin-bottom: 20px;">Sign in to continue to GeoScale Malaria Platform</p>

      <!-- Messages -->
      {% if messages %}
        <div class="messages">
          {% for message in messages %}
            <div class="message {{ message.tags }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Login Form -->
      <form method="post">
        {% csrf_token %}
        
        {% if form.non_field_errors %}
          <div class="error-messages">
            {{ form.non_field_errors }}
          </div>
        {% endif %}

        <!-- Username Field -->
        <div class="form-field">
          <label for="id_username">Username or email</label>
          <input type="text" name="username" id="id_username" placeholder="Enter your username or email" value="{{ form.username.value|default:'' }}" autocomplete="username" required>
          {% if form.username.errors %}
            <span class="field-error">{{ form.username.errors }}</span>
          {% endif %}
        </div>

        <!-- Password Field -->
        <div class="form-field">
          <label for="id_password">Password</label>
          <input type="password" name="password" id="id_password" placeholder="Enter your password" autocomplete="current-password" required>
          {% if form.password.errors %}
            <span class="field-error">{{ form.password.errors }}</span>
          {% endif %}
        </div>

        <!-- Remember Me & Forgot Password -->
        <div class="form-options">
          <label>
            <input type="checkbox" name="remember" style="width: auto !important; margin-right: 8px;">
            Remember me
          </label>
          <a href="{% url 'accounts:password_reset' %}">Forgot password?</a>
        </div>

        <!-- Login Button -->
        <button type="submit" class="btn-primary">Sign in</button>
      </form>


      <!-- Sign Up Link -->
      <div class="alt" style="text-align: center; border-top: 1px solid #e8eaed; padding-top: 20px;">
        <p>Don't have an account? <a href="{% url 'accounts:signup' %}">Sign up</a></p>
      </div>
      
    </div>
  </div>
</div>
{% endblock %}